import{r as o,c as t,h as s,g as i,H as e,a as r}from"./p-fa07a3fd.js";let n=class{constructor(s){o(this,s),this.openMoodsModal=t(this,"openMoodsModal",7),this.imageUrl="",this.postId=null,this.disabled=!1,this.theme="light",this.showOnHover=!1,this.contentLocation="left",this.hidden=!1}openMoodsModalHandler(){this.imageUrl&&this.postId&&this.openMoodsModal.emit({imageUrl:this.imageUrl,postId:this.postId})}componentDidLoad(){if(!this.showOnHover)return;this.hidden=!0;const o=this.el.parentElement;if(!o)return;let t=this.el.shadowRoot.querySelector(".add-to-moods-button__content-left"),s=this.el.shadowRoot.querySelector(".add-to-moods-button__content-right"),i=this.el.shadowRoot.querySelector("img");i.addEventListener("mouseenter",(()=>{t&&t.classList.add("add-to-moods-button__content-left--hover"),s&&s.classList.add("add-to-moods-button__content-right--hover")})),i.addEventListener("mouseleave",(()=>{t&&t.classList.remove("add-to-moods-button__content-left--hover"),s&&s.classList.remove("add-to-moods-button__content-right--hover")})),o.addEventListener("mouseenter",(()=>{this.hidden=!1})),o.addEventListener("mouseleave",(()=>{this.hidden=!0}))}render(){return s(e,null,s("div",{class:"add-to-moods-button "+(this.showOnHover?"add-to-moods-button--show-on-hover ":" ")+(!this.hidden&&this.showOnHover?"add-to-moods-button--show-on-hover--hover ":" "),onClick:()=>this.openMoodsModalHandler()},"left"===this.contentLocation&&s("div",{class:"add-to-moods-button__content-left"},s("slot",null)),s("img",{src:i("light"==this.theme?"./assets/add-icon.png":"./assets/add-icon-dark.png"),alt:"Add To MOODS"}),"right"===this.contentLocation&&s("div",{class:"add-to-moods-button__content-right"},s("slot",null))))}static get assetsDirs(){return["assets"]}get el(){return r(this)}};n.style=":host{display:block}.add-to-moods-button{align-items:center;cursor:pointer;display:flex;transition:opacity .2s ease-in-out;-webkit-user-select:none;-moz-user-select:none;user-select:none}.add-to-moods-button--show-on-hover{opacity:0}.add-to-moods-button--show-on-hover .add-to-moods-button__content-left,.add-to-moods-button--show-on-hover .add-to-moods-button__content-right{opacity:0;transition:opacity .2s ease-in-out}.add-to-moods-button--show-on-hover .add-to-moods-button__content-left--hover,.add-to-moods-button--show-on-hover .add-to-moods-button__content-right--hover,.add-to-moods-button--show-on-hover--hover{opacity:1;transition:opacity .2s ease-in-out}.add-to-moods-button img{margin-top:-.1rem;width:1.5rem}";class d{static getDescendantProperty(o,t,s=[]){let i,e,r,n,a,l;if(t){if(r=t.indexOf("."),-1===r?i=t:(i=t.slice(0,r),e=t.slice(r+1)),n=o[i],null!=n)if(e||"string"!=typeof n&&"number"!=typeof n)if("[object Array]"===Object.prototype.toString.call(n))for(a=0,l=n.length;a<l;a++)d.getDescendantProperty(n[a],e,s);else e&&d.getDescendantProperty(n,e,s);else s.push(n)}else s.push(o);return s}}class a{constructor(o=[],t=[],s={}){Array.isArray(t)||(s=t,t=[]),this.haystack=o,this.keys=t,this.options=Object.assign({caseSensitive:!1,sort:!1},s)}search(o=""){if(""===o)return this.haystack;const t=[];for(let s=0;s<this.haystack.length;s++){const i=this.haystack[s];if(0===this.keys.length){const s=a.isMatch(i,o,this.options.caseSensitive);s&&t.push({item:i,score:s})}else for(let s=0;s<this.keys.length;s++){const e=d.getDescendantProperty(i,this.keys[s]);let r=!1;for(let s=0;s<e.length;s++){const n=a.isMatch(e[s],o,this.options.caseSensitive);if(n){r=!0,t.push({item:i,score:n});break}}if(r)break}}return this.options.sort&&t.sort(((o,t)=>o.score-t.score)),t.map((o=>o.item))}static isMatch(o,t,s){o=String(o),t=String(t),s||(o=o.toLocaleLowerCase(),t=t.toLocaleLowerCase());const i=a.nearestIndexesFor(o,t);return!!i&&(o===t?1:i.length>1?i[i.length-1]-i[0]+2:2+i[0])}static nearestIndexesFor(o,t){const s=t.split("");let i=[];return a.indexesOfFirstLetter(o,t).forEach(((t,e)=>{let r=t+1;i[e]=[t];for(let t=1;t<s.length;t++){if(r=o.indexOf(s[t],r),-1===r){i[e]=!1;break}i[e].push(r),r++}})),i=i.filter((o=>!1!==o)),!!i.length&&i.sort(((o,t)=>1===o.length?o[0]-t[0]:(o=o[o.length-1]-o[0])-(t=t[t.length-1]-t[0])))[0]}static indexesOfFirstLetter(o,t){const s=t[0];return o.split("").map(((o,t)=>o===s&&t)).filter((o=>!1!==o))}}let l=class{constructor(s){o(this,s),this.moodsBoardPicked=t(this,"moodsBoardPicked",7),this.boards="",this.open=!1,this.moodBoards=[],this.inputValue="",this.newBoardName=""}componentDidLoad(){try{this.moodBoards=JSON.parse(this.boards)}finally{this.searcher=new a(this.moodBoards,["name"],{caseSensitive:!1})}document.addEventListener("click",(o=>{this.el.contains(o.target)||(this.open=!1)}))}toggleOpen(){this.open=!this.open}onInputKeyDown(o){return"Enter"===o.key?(this.selectedMoodBoard||(this.selectedMoodBoard=this.moodBoards[0]),void this.toggleOpen()):"Escape"===o.key?(o.stopPropagation(),o.preventDefault(),void(this.open=!1)):void(this.open||(this.open=!0))}onInputInput(o){this.inputValue=o.target.value,this.moodBoards=this.inputValue?this.searcher.search(this.inputValue):JSON.parse(this.boards)}selectedMoodBoardChanged(o,t){o!==t&&(this.inputValue=o.name)}handleNewBoardInput(o){this.newBoardName=o.target.value}handleNewBoardClick(){this.selectedMoodBoard={postId:null,name:this.newBoardName},this.newBoardName="",this.open=!1}handleBoardClick(){this.moodsBoardPicked.emit({board:this.selectedMoodBoard})}render(){return s(e,null,s("div",{class:"moods-board-picker"},s("div",{onClick:()=>this.toggleOpen(),class:"moods-board-picker__container"},s("div",{class:"moods-board-picker__title"},"Save Into:"),s("div",{class:"moods-board-picker__selected"},s("input",{class:"moods-board-picker__input",type:"text",value:this.inputValue,onKeyDown:this.onInputKeyDown.bind(this),onInput:this.onInputInput.bind(this),onClick:o=>{if(this.open)return o.stopImmediatePropagation(),!1},placeholder:"Search..."}),s("span",{class:"moods-board-picker__selected__arrow "+(this.open?"moods-board-picker__selected__arrow--open":"")},"â–¼"))),s("div",{class:"moods-board-picker__options "+(this.open?"moods-board-picker__options--visible":"")},s("div",{class:"moods-board-picker__new-board"},s("div",null,s("div",{class:"moods-board-picker__title"},"Create New Board:"),s("input",{class:"moods-board-picker__input moods-board-picker__new-board-input",type:"text",placeholder:"Start Typing...",onInput:this.handleNewBoardInput.bind(this),onKeyDown:o=>{"Enter"===o.key&&this.handleNewBoardClick()},value:this.newBoardName})),s("div",{onClick:this.handleNewBoardClick.bind(this)},s("img",{class:"moods-board-picker__new-board-icon",src:i("./assets/plus.png")}))),0===this.moodBoards.length&&s("div",{class:"moods-board-picker__option moods-board-picker__option--no-results"},"No results"),this.moodBoards.map((o=>s("div",{class:"moods-board-picker__option",onClick:()=>{this.selectedMoodBoard=o,this.toggleOpen()}},o.name)))),s("simple-button",{theme:"dark",onClick:()=>{this.handleBoardClick()},class:"moods-board-picker__button"},"Save")))}static get assetsDirs(){return["assets"]}get el(){return r(this)}static get watchers(){return{selectedMoodBoard:["selectedMoodBoardChanged"]}}};l.style=":host{display:block}.moods-board-picker{display:block;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.moods-board-picker__container{background:#fff;border:1px solid #000;padding:1rem 1.5rem;position:relative}.moods-board-picker__selected{display:flex;width:100%}.moods-board-picker__selected__arrow{cursor:pointer}.moods-board-picker__selected__arrow,.moods-board-picker__selected__arrow--open{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.moods-board-picker__selected__arrow--open{transform:rotate(180deg)}.moods-board-picker__title{font-size:9px;font-weight:300;margin-bottom:.5rem;text-transform:uppercase;width:100%}.moods-board-picker__input{border-width:0;display:block;font-weight:300;padding:0;width:100%}.moods-board-picker__input,.moods-board-picker__input:focus{outline:2px solid transparent;outline-offset:2px}.moods-board-picker__input{background:none;font-size:1rem;letter-spacing:1.5px}.moods-board-picker__input::-moz-placeholder{color:#000;font-family:Roboto,sans-serif;font-size:1rem;letter-spacing:1.5px;opacity:1}.moods-board-picker__input::placeholder{color:#000;font-family:Roboto,sans-serif;font-size:1rem;letter-spacing:1.5px;opacity:1}.moods-board-picker__input::-moz-selection{background:none}.moods-board-picker__input::selection{background:none}.moods-board-picker__options{left:0;position:absolute;right:0;top:0;z-index:10}@media (min-width:1024px){.moods-board-picker__options{top:auto}}.moods-board-picker__options{background:#fff;border:1px solid #000;margin-top:-1px;max-height:275px;opacity:0;overflow-x:hidden;overflow-y:auto;scrollbar-width:none;transform:translateY(-100%);transition:visibility 0s linear .25s,opacity .25s 0s,transform .25s;visibility:hidden}.moods-board-picker__options--visible{opacity:1;transition:visibility 0s linear 0s,opacity .25s 0s,transform .25s;visibility:visible}.moods-board-picker__options::-webkit-scrollbar{display:none}@media (min-width:1024px){.moods-board-picker__options{transform:translateY(0)}}.moods-board-picker__option{cursor:pointer;display:block;padding:.75rem 1.5rem;transition-duration:.3s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);width:100%}.moods-board-picker__option:first-child{padding-top:0}.moods-board-picker__option:hover{background:#000;color:#fff;transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.moods-board-picker__option--no-results{cursor:default!important;text-decoration:none!important}.moods-board-picker__new-board{align-items:center;display:flex;justify-content:space-between;padding-left:1.5rem;padding-right:1.5rem;padding-top:1.5rem}.moods-board-picker__new-board>:first-child{width:100%}.moods-board-picker__new-board>:last-child{cursor:pointer;margin-left:1.5rem}.moods-board-picker__new-board-icon{width:1.5rem}.moods-board-picker__new-board-input{--tw-border-opacity:1;border-bottom-width:1px;border-color:rgb(0 0 0/var(--tw-border-opacity));margin-bottom:.5rem;padding-bottom:1rem}.moods-board-picker__button{margin-top:2rem;width:100%}";let c=class{constructor(t){o(this,t),this.open=!1,this.imageUrl="",this.postId=null,this.boards="",this.moodsApiUrl="",this.wpApiNonce="",this.isAuthenticated=!1}componentWillLoad(){document.addEventListener("openMoodsModal",(o=>{this.open=!0,this.imageUrl=o.detail.imageUrl,this.postId=o.detail.postId,this.isAuthenticated||setTimeout((()=>{this.open=!1,document.location.href="/subscription/subscribe"}),1e3)}))}componentDidLoad(){this.container.addEventListener("keydown",(o=>{"Escape"===o.key&&(this.open=!1)})),document.addEventListener("moodsBoardPicked",(o=>{if(""===this.moodsApiUrl)return void console.error("moodsApiUrl prop is not set.");if(""===this.wpApiNonce)return void console.error("wpApiNonce prop is not set.");const t=o.detail.board,s=new FormData;s.append("id",t.id||null),s.append("post_id",this.postId.toString()),s.append("name",t.name),s.append("image_url",this.imageUrl),fetch(this.moodsApiUrl,{method:"POST",headers:{"X-WP-Nonce":this.wpApiNonce},body:s}).then((o=>{if(200===o.status){let o=JSON.parse(this.boards);o.push(t),this.boards=JSON.stringify(o)}})).catch((o=>{console.error(o)})),document.querySelector(".moods-modal__success").classList.add("moods-modal__success--visible"),setTimeout((()=>{this.open=!1}),1e3),setTimeout((()=>{document.querySelector(".moods-modal__success").classList.remove("moods-modal__success--visible")}),1500)}))}stopBodyScroll(){document.body.style.overflow=!0===this.open?"hidden":"inherit"}clampBodyWhenOpen(o,t){o!==t&&o&&this.container.focus()}render(){return s(e,null,s("tele-portal",null,s("div",{ref:o=>{this.container=o},tabIndex:-1,class:"moods-modal "+(this.open?"moods-modal--visible":"")},s("div",{class:"moods-modal__content"},s("div",{class:"moods-modal__left"},s("img",{src:this.imageUrl})),s("div",{class:"moods-modal__right"},s("div",{class:"moods-modal__success"},s("div",{class:"moods-modal__success__text"},"Saved!")),s("div",{class:"moods-modal__close",onClick:()=>this.open=!1},"Close"),s("div",{class:"moods-modal__picker"},s("div",null,s("div",{class:"moods-modal__text"},"Choose A Board"),s("moods-board-picker",{boards:this.boards}))))))))}get el(){return r(this)}static get watchers(){return{open:["stopBodyScroll","clampBodyWhenOpen"]}}};c.style=":host{display:block}.moods-modal{height:100vh;left:0;position:fixed;top:0;width:100%;z-index:1000}.moods-modal>*{box-sizing:border-box}.moods-modal{background:#fff;opacity:0;transition:visibility 0s linear .25s,opacity .25s 0s,transform .25s;visibility:hidden}.moods-modal--visible{opacity:1;transition:visibility 0s linear 0s,opacity .25s 0s,transform .25s;visibility:visible}.moods-modal__content{display:block;height:100%}@media (min-width:768px){.moods-modal__content{display:grid;grid-template-columns:repeat(2,minmax(0,1fr))}}.moods-modal__left{display:flex;flex-direction:column;justify-content:center;padding:3rem;z-index:20}@media (min-width:1024px){.moods-modal__left{padding:8rem}}.moods-modal__left{background:#f5f5f5}.moods-modal__left>*{max-height:40vh}@media (min-width:1024px){.moods-modal__left>*{max-height:60vh}}.moods-modal__left>*{-o-object-fit:contain;object-fit:contain}.moods-modal__right{padding:3rem;position:relative}.moods-modal__close{cursor:pointer;font-size:9px;font-weight:300;padding:1rem;position:absolute;right:0;text-decoration-line:underline;text-transform:uppercase;text-underline-offset:2px;top:0}.moods-modal__picker{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center}.moods-modal__picker>*{max-width:409px;width:100%}.moods-modal__text{margin-bottom:2rem}.moods-modal__success{--tw-bg-opacity:1;--tw-text-opacity:1;align-items:center;background-color:rgb(0 0 0/var(--tw-bg-opacity));bottom:0;color:rgb(255 255 255/var(--tw-text-opacity));display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;transform:translateX(-100%);z-index:10}.moods-modal__success,.moods-modal__success--visible{transition:transform .3s ease-in-out}.moods-modal__success--visible{transform:translateX(0)}.moods-modal__success__text{font-size:1.25rem;line-height:1.75rem}";let m=class{constructor(t){o(this,t),this.theme="light",this.fillWidth=!1,this.disabled=!1}render(){return s(e,null,s("div",{class:"simple-button "+(this.fillWidth?"simple-button--full-width ":" ")+("dark"==this.theme?"simple-button--dark ":" ")+(this.disabled?"simple-button--disabled":" "),role:"button","aria-pressed":"false",tabindex:"0"},s("div",{class:"simple-button__icon"},s("slot",{name:"icon"})),s("div",{class:"simple-button__text"},s("slot",null))))}};m.style=":host{--font-family:var(--leibal-components-font-family,sans-serif);--color-light:#fff;--color-dark:#222;display:block;font-family:var(--font-family)}.simple-button{align-items:center;background-color:var(--color-light);border-color:var(--color-dark);border-style:solid;border-width:1px;color:var(--color-dark);cursor:pointer;display:flex;justify-content:center;padding:1.5rem 1rem;position:relative;transition-duration:.3s;-webkit-user-select:none;-moz-user-select:none;user-select:none}.simple-button--disabled{cursor:not-allowed;opacity:.5}@media (min-width:768px){.simple-button__text{font-size:1.125rem;line-height:1.75rem}}@media (min-width:1024px){.simple-button__text{font-size:1.25rem;line-height:1.75rem}}.simple-button__icon{height:1rem;position:absolute;right:1rem;top:1rem;width:1rem}.simple-button--dark,.simple-button:active,.simple-button:hover{background-color:var(--color-dark);color:var(--color-light)}.simple-button--dark{border-color:var(--color-dark)}.simple-button--dark:active,.simple-button--dark:hover{background-color:var(--color-light);color:var(--color-dark)}";let p=class{constructor(t){o(this,t)}createPortal(){this.portal=document.createElement("div"),document.body.prepend(this.portal)}moveElementToPortal(){this.portal.appendChild(this.el)}componentWillLoad(){this.createPortal()}componentDidLoad(){this.moveElementToPortal()}disconnectCallback(){this.portal.remove()}render(){return s(e,null,s("slot",null))}get el(){return r(this)}};export{n as add_to_moods_button,l as moods_board_picker,c as moods_modal,m as simple_button,p as tele_portal}