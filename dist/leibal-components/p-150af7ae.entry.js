import{r as s,h as o,g as t,H as e}from"./p-fa07a3fd.js";let r=class{constructor(o){s(this,o),this.boardsList=[],this.sortBy="timestamp",this.sortOrder="desc",this.creatingBoard=!1,this.creatingBoardName="",this.apiUrl="/wp-json/moods/v1/create"}boardsChanged(s){this.boardsList=JSON.parse(s)}setSort(s,o){this.sortBy=s,this.sortOrder=o}sortSelectedClass(s,o){return this.sortBy==s&&this.sortOrder==o?"moods-boards__sort-by--selected":""}async createBoard(){const s=new FormData;s.append("title",this.creatingBoardName),fetch(this.apiUrl,{method:"POST",headers:{"X-WP-Nonce":this.wpNonce},body:s}).then((s=>s.json())).then((s=>{console.log("Success:",s),this.boardsList.push(s),this.creatingBoard=!1,this.creatingBoardName=""}))}removeOverlayHandler(s){const o=s.detail.payload,t=new FormData;t.append("id",o.id),fetch("/wp-json/moods/v1/delete",{method:"POST",headers:{"X-WP-Nonce":this.wpNonce},body:t}).then((s=>s.json())).then((()=>{this.boardsList=this.boardsList.filter((s=>s.id!=o.id))}))}componentWillLoad(){this.boardsList=JSON.parse(this.boards)}render(){return o(e,null,o("div",{class:"moods-boards"},o("div",{class:"moods-boards__sidebar"},o("sticky-scroller",{startOffset:130},o("div",null,o("div",{class:"moods-boards__create-board"},this.creatingBoard?o("div",{class:"moods-boards__create-board__input"},o("input",{onKeyDown:s=>{"Escape"==s.key&&(this.creatingBoard=!1),"Enter"==s.key&&this.createBoard()},onInput:s=>{this.creatingBoardName=s.target.value},type:"text",placeholder:"Type Board Title"}),o("div",{class:"moods-boards__create-board__button",onClick:async()=>{await this.createBoard()}},o("img",{src:t("./assets/arrow.png"),alt:"Submit"}))):o("a",{onClick:()=>{this.creatingBoard=!0}},"Create New Board")),o("div",{class:"moods-boards__sort"},o("div",{class:"moods-boards__sort__header"},"Sort Boards"),o("div",{class:"moods-boards__sort-by "+this.sortSelectedClass("timestamp","desc"),onClick:()=>this.setSort("timestamp","desc")},"Latest"),o("div",{class:"moods-boards__sort-by "+this.sortSelectedClass("timestamp","asc"),onClick:()=>this.setSort("timestamp","asc")},"Oldest"),o("div",{class:"moods-boards__sort-by "+this.sortSelectedClass("name","asc"),onClick:()=>this.setSort("name","asc")},"A - Z"),o("div",{class:"moods-boards__sort-by "+this.sortSelectedClass("name","desc"),onClick:()=>this.setSort("name","desc")},"Z - A"))))),o("div",{class:"moods-boards__content"},this.boardsList.sort(((s,o)=>{let t=s[this.sortBy],e=o[this.sortBy];return"timestamp"==this.sortBy&&(t=Array.isArray(s.images)&&s.images.length>0?s.images.slice(-1)[0].timestamp:s.timestamp,e=Array.isArray(o.images)&&o.images.length>0?o.images.slice(-1)[0].timestamp:o.timestamp),"asc"==this.sortOrder?t>e?1:-1:t<e?1:-1})).map((s=>o("a",{href:s.url},o("moods-board-preview",{board:s})))))))}static get assetsDirs(){return["assets"]}static get watchers(){return{boards:["boardsChanged"]}}};r.style=":host{display:block}.moods-boards{cursor:default;display:block;font-size:.88rem}@media (min-width:768px){.moods-boards{display:grid;gap:1rem;grid-template-columns:repeat(10,minmax(0,1fr))}.moods-boards__sidebar{grid-column:span 2/span 2}}.moods-boards__content{display:block}@media (min-width:768px){.moods-boards__content{display:grid;gap:2rem;grid-column:span 8/span 8;grid-template-columns:repeat(4,minmax(0,1fr));row-gap:4rem}}.moods-boards__create-board{margin-bottom:.5rem}.moods-boards__create-board__input{align-items:center;border-bottom:1px solid #888;display:flex;padding-bottom:.5rem;padding-top:.5rem}.moods-boards__create-board__input input{all:unset;cursor:text;flex:1 1 0%}.moods-boards__create-board__button{align-items:center;cursor:pointer;display:flex;margin-left:.5rem}.moods-boards__create-board__button img{opacity:.7;width:16px}.moods-boards__create-board a{display:block;font-weight:200;padding-bottom:.5rem;padding-top:.5rem}.moods-boards__create-board a:hover{cursor:pointer;font-weight:400;text-decoration-line:underline;text-underline-offset:2px}.moods-boards__sort__header{margin-bottom:.5rem}.moods-boards__sort-by{cursor:pointer;font-weight:200;margin-bottom:.5rem;margin-left:1.5rem}.moods-boards__sort-by--selected{font-weight:400;text-decoration-line:underline;text-underline-offset:2px}.moods-boards a{color:inherit;text-decoration-line:none}";export{r as moods_boards}