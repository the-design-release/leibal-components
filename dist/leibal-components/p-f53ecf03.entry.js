import{r as o,c as t,h as i,g as r,H as e,a as s}from"./p-fa07a3fd.js";class a{static getDescendantProperty(o,t,i=[]){let r,e,s,n,d,c;if(t){if(s=t.indexOf("."),-1===s?r=t:(r=t.slice(0,s),e=t.slice(s+1)),n=o[r],null!=n)if(e||"string"!=typeof n&&"number"!=typeof n)if("[object Array]"===Object.prototype.toString.call(n))for(d=0,c=n.length;d<c;d++)a.getDescendantProperty(n[d],e,i);else e&&a.getDescendantProperty(n,e,i);else i.push(n)}else i.push(o);return i}}class n{constructor(o=[],t=[],i={}){Array.isArray(t)||(i=t,t=[]),this.haystack=o,this.keys=t,this.options=Object.assign({caseSensitive:!1,sort:!1},i)}search(o=""){if(""===o)return this.haystack;const t=[];for(let i=0;i<this.haystack.length;i++){const r=this.haystack[i];if(0===this.keys.length){const i=n.isMatch(r,o,this.options.caseSensitive);i&&t.push({item:r,score:i})}else for(let i=0;i<this.keys.length;i++){const e=a.getDescendantProperty(r,this.keys[i]);let s=!1;for(let i=0;i<e.length;i++){const a=n.isMatch(e[i],o,this.options.caseSensitive);if(a){s=!0,t.push({item:r,score:a});break}}if(s)break}}return this.options.sort&&t.sort(((o,t)=>o.score-t.score)),t.map((o=>o.item))}static isMatch(o,t,i){o=String(o),t=String(t),i||(o=o.toLocaleLowerCase(),t=t.toLocaleLowerCase());const r=n.nearestIndexesFor(o,t);return!!r&&(o===t?1:r.length>1?r[r.length-1]-r[0]+2:2+r[0])}static nearestIndexesFor(o,t){const i=t.split("");let r=[];return n.indexesOfFirstLetter(o,t).forEach(((t,e)=>{let s=t+1;r[e]=[t];for(let t=1;t<i.length;t++){if(s=o.indexOf(i[t],s),-1===s){r[e]=!1;break}r[e].push(s),s++}})),r=r.filter((o=>!1!==o)),!!r.length&&r.sort(((o,t)=>1===o.length?o[0]-t[0]:(o=o[o.length-1]-o[0])-(t=t[t.length-1]-t[0])))[0]}static indexesOfFirstLetter(o,t){const i=t[0];return o.split("").map(((o,t)=>o===i&&t)).filter((o=>!1!==o))}}let d=class{constructor(i){o(this,i),this.moodsBoardPicked=t(this,"moodsBoardPicked",7),this.boards="",this.open=!1,this.moodBoards=[],this.inputValue="",this.newBoardName=""}componentDidLoad(){try{this.moodBoards=JSON.parse(this.boards)}finally{this.searcher=new n(this.moodBoards,["name"],{caseSensitive:!1})}document.addEventListener("click",(o=>{this.el.contains(o.target)||(this.open=!1)}))}toggleOpen(){this.open=!this.open}onInputKeyDown(o){return"Enter"===o.key?(this.selectedMoodBoard||(this.selectedMoodBoard=this.moodBoards[0]),void this.toggleOpen()):"Escape"===o.key?(o.stopPropagation(),o.preventDefault(),void(this.open=!1)):void(this.open||(this.open=!0))}onInputInput(o){this.inputValue=o.target.value,this.moodBoards=this.inputValue?this.searcher.search(this.inputValue):JSON.parse(this.boards)}selectedMoodBoardChanged(o,t){o!==t&&(this.inputValue=o.name)}handleNewBoardInput(o){this.newBoardName=o.target.value}handleNewBoardClick(){this.selectedMoodBoard={postId:null,name:this.newBoardName},this.newBoardName="",this.open=!1}handleBoardClick(){this.moodsBoardPicked.emit({board:this.selectedMoodBoard})}render(){return i(e,null,i("div",{class:"moods-board-picker"},i("div",{onClick:()=>this.toggleOpen(),class:"moods-board-picker__container"},i("div",{class:"moods-board-picker__title"},"Save Into:"),i("div",{class:"moods-board-picker__selected"},i("input",{class:"moods-board-picker__input",type:"text",value:this.inputValue,onKeyDown:this.onInputKeyDown.bind(this),onInput:this.onInputInput.bind(this),onClick:o=>{if(this.open)return o.stopImmediatePropagation(),!1},placeholder:"Search..."}),i("span",{class:"moods-board-picker__selected__arrow "+(this.open?"moods-board-picker__selected__arrow--open":"")},"â–¼"))),i("div",{class:"moods-board-picker__options "+(this.open?"moods-board-picker__options--visible":"")},i("div",{class:"moods-board-picker__new-board"},i("div",null,i("div",{class:"moods-board-picker__title"},"Create New Board:"),i("input",{class:"moods-board-picker__input moods-board-picker__new-board-input",type:"text",placeholder:"Start Typing...",onInput:this.handleNewBoardInput.bind(this),onKeyDown:o=>{"Enter"===o.key&&this.handleNewBoardClick()},value:this.newBoardName})),i("div",{onClick:this.handleNewBoardClick.bind(this)},i("img",{class:"moods-board-picker__new-board-icon",src:r("./assets/plus.png")}))),0===this.moodBoards.length&&i("div",{class:"moods-board-picker__option moods-board-picker__option--no-results"},"No results"),this.moodBoards.map((o=>i("div",{class:"moods-board-picker__option",onClick:()=>{this.selectedMoodBoard=o,this.toggleOpen()}},o.name)))),i("simple-button",{theme:"dark",onClick:()=>{this.handleBoardClick()},class:"moods-board-picker__button"},"Save")))}static get assetsDirs(){return["assets"]}get el(){return s(this)}static get watchers(){return{selectedMoodBoard:["selectedMoodBoardChanged"]}}};d.style=":host{display:block}.moods-board-picker{display:block;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.moods-board-picker__container{background:#fff;border:1px solid #000;padding:1rem 1.5rem;position:relative}.moods-board-picker__selected{display:flex;width:100%}.moods-board-picker__selected__arrow{cursor:pointer}.moods-board-picker__selected__arrow,.moods-board-picker__selected__arrow--open{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.moods-board-picker__selected__arrow--open{transform:rotate(180deg)}.moods-board-picker__title{font-size:9px;font-weight:300;margin-bottom:.5rem;text-transform:uppercase;width:100%}.moods-board-picker__input{border-width:0;display:block;font-weight:300;padding:0;width:100%}.moods-board-picker__input,.moods-board-picker__input:focus{outline:2px solid transparent;outline-offset:2px}.moods-board-picker__input{background:none;font-size:1rem;letter-spacing:1.5px}.moods-board-picker__input::-moz-placeholder{color:#000;font-family:Roboto,sans-serif;font-size:1rem;letter-spacing:1.5px;opacity:1}.moods-board-picker__input::placeholder{color:#000;font-family:Roboto,sans-serif;font-size:1rem;letter-spacing:1.5px;opacity:1}.moods-board-picker__input::-moz-selection{background:none}.moods-board-picker__input::selection{background:none}.moods-board-picker__options{left:0;position:absolute;right:0;top:0;z-index:10}@media (min-width:1024px){.moods-board-picker__options{top:auto}}.moods-board-picker__options{background:#fff;border:1px solid #000;margin-top:-1px;max-height:275px;opacity:0;overflow-x:hidden;overflow-y:auto;scrollbar-width:none;transform:translateY(-100%);transition:visibility 0s linear .25s,opacity .25s 0s,transform .25s;visibility:hidden}.moods-board-picker__options--visible{opacity:1;transition:visibility 0s linear 0s,opacity .25s 0s,transform .25s;visibility:visible}.moods-board-picker__options::-webkit-scrollbar{display:none}@media (min-width:1024px){.moods-board-picker__options{transform:translateY(0)}}.moods-board-picker__option{cursor:pointer;display:block;padding:.75rem 1.5rem;transition-duration:.3s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);width:100%}.moods-board-picker__option:first-child{padding-top:0}.moods-board-picker__option:hover{background:#000;color:#fff;transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.moods-board-picker__option--no-results{cursor:default!important;text-decoration:none!important}.moods-board-picker__new-board{align-items:center;display:flex;justify-content:space-between;padding-left:1.5rem;padding-right:1.5rem;padding-top:1.5rem}.moods-board-picker__new-board>:first-child{width:100%}.moods-board-picker__new-board>:last-child{cursor:pointer;margin-left:1.5rem}.moods-board-picker__new-board-icon{width:1.5rem}.moods-board-picker__new-board-input{--tw-border-opacity:1;border-bottom-width:1px;border-color:rgb(0 0 0/var(--tw-border-opacity));margin-bottom:.5rem;padding-bottom:1rem}.moods-board-picker__button{margin-top:2rem;width:100%}";export{d as moods_board_picker}